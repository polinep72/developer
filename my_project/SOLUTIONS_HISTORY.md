# История решений Soft_IPK

| Дата | Подпроект | Проблема | Влияние | Причина | Решение | Статус |
|------|-----------|----------|---------|---------|---------|--------|
| 2025‑11‑18 | `web_app_WebChip` | Opera не пропускает логин на `http://192.168.1.139:8087/login` | Пользователи Opera не могут попасть в систему | Несовпадение форматов логина (Polin-EP vs Polin_EP) приводило к тому, что Opera подставляла вариант без дефиса | Добавлена нормализация имени пользователя (нижний регистр, `-`→`_`) и поиск по канонической форме в `/login` и `/register` | Решено |
| 2025‑11‑18 | `web_app_WebChip` | Поиск по шифру кристалла «3» не возвращает результатов в Яндекс браузере | Пользователи не видят остатки по кристаллам | Приложение подключалось к неверной БД (`DB_NAME2`), поэтому таблицы `users`/`n_chip` отсутствовали; также не было телеметрии запроса | Подключение переведено на `DB_NAME` (с fallback на `DB_NAME2`), в `/search` включено детальное логирование параметров и SQL | В работе |
| 2025‑11‑18 | `telegram_bot_HMCB` | Бот не учитывает новые склады (invoice_p, invoice_f, consumption_p, consumption_f) | Пользователь видит только остатки основного склада | В запросах бота учитывалась только `invoice`/`consumption`, новые таблицы не опрашивались | Расширен запрос: агрегирует по трём складам, выводит блоки с разделителем `---------------` и сообщает при отсутствии данных/нулевых остатках | Решено |

