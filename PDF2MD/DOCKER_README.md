# PDF2MD - Docker инструкции

Это приложение для конвертации PDF файлов в Markdown формат с использованием Streamlit интерфейса.

## Требования

- Docker
- Docker Compose

## Быстрый запуск

### 1. Сборка и запуск через Docker Compose (рекомендуется)

```bash
# Собрать образ и запустить контейнер
docker-compose up --build

# Запустить в фоновом режиме
docker-compose up -d --build
```

### 2. Запуск через Docker напрямую

```bash
# Собрать образ
docker build -t pdf2md .

# Запустить контейнер
docker run -p 8501:8501 pdf2md
```

## Доступ к приложению

После запуска приложение будет доступно по адресу:
- http://localhost:8501

## Остановка

```bash
# Остановить контейнеры
docker-compose down

# Остановить и удалить контейнеры с образами
docker-compose down --rmi all
```

## Структура проекта

```
PDF2MD/
├── Dockerfile              # Конфигурация Docker образа
├── docker-compose.yml      # Конфигурация Docker Compose
├── .dockerignore          # Исключения для Docker
├── requirements.txt       # Python зависимости
├── run.py                # Точка входа приложения
├── streamlit3.py         # Основное приложение Streamlit
├── uploads/              # Папка для загрузок (монтируется в контейнер)
└── DOCKER_README.md      # Эта инструкция
```

## Особенности

- Приложение использует библиотеку `marker-pdf` для конвертации
- Поддерживает обработку как отдельных PDF файлов, так и архивов ZIP
- Многопоточная обработка для ускорения работы
- Автоматическое создание архива с результатами
- Настроены лимиты памяти (4GB) для обработки больших файлов

## Устранение неполадок

### Проблемы с памятью
Если при обработке больших файлов возникают ошибки памяти, увеличьте лимиты в `docker-compose.yml`:

```yaml
deploy:
  resources:
    limits:
      memory: 8G  # Увеличить до 8GB
```

### Проблемы с портами
Если порт 8501 занят, измените маппинг портов в `docker-compose.yml`:

```yaml
ports:
  - "8502:8501"  # Использовать порт 8502 на хосте
```

### Просмотр логов
```bash
# Просмотр логов контейнера
docker-compose logs -f pdf2md

# Просмотр логов конкретного контейнера
docker logs <container_id>
```
