{
  "$schema": "https://cursor.rules/schema.json",
  "name": "Universal Project Rules",
  "description": "Правила для работы с проектами любого уровня сложности",
  "rules": [
    {
      "name": "language_and_communication",
      "description": "Язык и стиль общения",
      "instructions": [
        "Отвечать всегда на русском языке",
        "Не выдавать высокоуровневые ответы, давать конкретное решение применимое к проекту", 
        "Не давать детальные пояснения, но описывать зачем вносишь данные изменения",
        "Перед внесением изменений описывать план реализации по пунктам и после приступать к реализации",
        "Учитывать линтеры при формировании кода",
        "Всегда проверять весь код программы перед внесением изменений для исключения дублирования функций"
      ]
    },
    {
      "name": "version_control",
      "description": "Управление версионностью (Git)",
      "instructions": [
        "Использовать семантическое версионирование (SemVer) для тегов",
        "Применять Conventional Commits: type(scope): description",
        "Типы коммитов: feat, fix, docs, style, refactor, test, chore",
        "Делать атомарные коммиты - одна логическая единица изменения",
        "Перед коммитом проверять изменения через git diff",
        "main/master - стабильная версия, только через PR",
        "develop - ветка разработки",
        "Функциональные ветки: feature/название-фичи, fix/название-бага",
        "Перед работой убеждаться в актуальной версии (git pull)",
        "Создавать feature-ветку для новой функциональности",
        "После завершения создавать Pull Request/Merge Request"
      ]
    },
    {
      "name": "context_files",
      "description": "Автоматическое создание файлов контекста",
      "instructions": [
        "При первом обращении к проекту создавать все файлы контекста",
        "PROJECT_CONTEXT.md - описание проекта, структура, статус",
        "SOLUTIONS_HISTORY.md - история решенных проблем и решений", 
        "CHAT_HISTORY.md - полная история переписки с AI-ассистентом",
        "SYNC_INSTRUCTIONS.md - инструкции по синхронизации",
        "CHANGELOG.md - история изменений проекта (Keep a Changelog, SemVer)",
        "README.md - документация проекта"
      ]
    },
    {
      "name": "multi_level_projects",
      "description": "Работа с многоуровневыми проектами", 
      "instructions": [
        "При открытии проекта проверять структуру папок",
        "Подпапки анализировать как подпроекты",
        "Читать файлы контекста во всех уровнях проекта",
        "Объединять контекст из всех подпроектов",
        "Не дублировать решения - проверять в других подпроектах",
        "При работе в подпроекте обновлять файлы контекста",
        "Обеспечивать непрерывность контекста между уровнями"
      ]
    },
    {
      "name": "project_analysis", 
      "description": "Анализ подпроектов",
      "instructions": [
        "При анализе проекта просматривать все подпапки",
        "Определять назначение каждого подпроекта",
        "Выявлять связи между подпроектами (БД, API, конфигурации)",
        "Документировать архитектуру в PROJECT_CONTEXT.md",
        "Анализировать влияние изменений в одном подпроекте на другие",
        "Отслеживать общие ресурсы и зависимости"
      ]
    },
    {
      "name": "chat_history_format",
      "description": "Формат ведения истории чата",
      "instructions": [
        "Каждая реплика записывается отдельным блоком в формате:",
        "Пользователь: <сообщение>", 
        "ИИ Агент: <ответ>",
        "Сообщения идут строго в хронологическом порядке",
        "Ответ агента может содержать подпункты, но остается одним сообщением",
        "Не смешивать разные роли в один блок",
        "Новые записи добавляются в конец файла без изменения предыдущих"
      ]
    },
    {
      "name": "code_formatting",
      "description": "Форматирование кода в переписке",
      "instructions": [
        "Для существующего кода использовать код-референсы:",
        "startLine:endLine:filepath",
        "// кодовая выписка",
        "Всегда указывать начальную и конечную строки, полный путь к файлу",
        "Для нового кода использовать стандартные fenced-блоки с языком",
        "Сохранять исходные отступы и стиль форматирования",
        "Комментарии писать только по существу"
      ]
    },
    {
      "name": "workflow",
      "description": "Рабочий процесс",
      "instructions": [
        "При первом обращении создавать все файлы контекста",
        "При решении проблемы обновлять соответствующие файлы", 
        "При завершении сессии сохранять изменения в Git",
        "При работе на новом компьютере читать файлы контекста",
        "Обеспечивать непрерывность контекста между уровнями проекта",
        "Автоматически синхронизировать контекст между подпроектами"
      ]
    }
  ]
}