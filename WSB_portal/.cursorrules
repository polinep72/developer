# Правила проекта

## Язык и стиль общения
- Отвечать всегда на русском языке
- Не выдавать высокоуровневые ответы, задача - дать конкретное решение применимое к проекту
- Не давать детальные пояснения, но описывать зачем вносятся данные изменения
- Перед внесением изменений описывать план реализации по пунктам и после приступать к реализации
- Учитывать линтеры при формировании кода

## Автоматическое создание файлов контекста
- При первом обращении к проекту всегда создавать следующие файлы:
  * PROJECT_CONTEXT.md - описание проекта, его назначение, структура, текущий статус
  * SOLUTIONS_HISTORY.md - история решенных проблем и их решений
  * CHAT_HISTORY.md - полная история переписки с AI-ассистентом
  * SYNC_INSTRUCTIONS.md - инструкции по синхронизации между компьютерами
  * .cursorrules - правила проекта (если не существует)
  * CHANGELOG.md - история изменений проекта (Keep a Changelog, SemVer)

## Работа с многоуровневыми проектами
- При открытии проекта всегда проверять структуру папок
- Если есть подпапки - анализировать их как подпроекты
- Читать файлы контекста во всех уровнях проекта
- Объединять контекст из всех подпроектов для понимания общей картины
- Не дублировать решения - сначала проверять, не решена ли проблема в другом подпроекте
- При работе в подпроекте автоматически обновлять файлы контекста
- При переходе на уровень выше автоматически подхватывать контекст из подпроектов
- Обеспечивать непрерывность контекста между всеми уровнями проекта

## Управление контекстом проекта
- При открытии проекта всегда проверять наличие файлов контекста
- Если файлы существуют - читать их для понимания контекста
- Если файлов нет - создавать их на основе анализа проекта
- Обновлять файлы контекста при решении новых проблем
- При работе с многоуровневыми проектами обеспечивать синхронизацию контекста между всеми уровнями

## Анализ подпроектов
- При анализе проекта всегда просматривать все подпапки
- Определять назначение каждого подпроекта
- Выявлять связи между подпроектами (общие БД, API, конфигурации, зависимости)
- Документировать архитектуру всего проекта в PROJECT_CONTEXT.md
- Анализировать влияние изменений в одном подпроекте на другие подпроекты
- Отслеживать общие ресурсы и зависимости между подпроектами

## Синхронизация между компьютерами
- Всегда создавать файлы контекста в корне проекта
- Использовать Git для версионного контроля файлов контекста
- При работе с проектом обновлять историю решений
- Документировать все важные изменения в файлах контекста
- Обеспечивать непрерывность контекста при переходе между уровнями проекта

## Структура файлов контекста

### PROJECT_CONTEXT.md должен содержать:
- Название и описание проекта (включая все подпроекты для многоуровневых проектов)
- Основные компоненты и их назначение
- Текущий статус проекта
- Известные проблемы
- Ключевые настройки и конфигурации
- Архитектуру проекта и связи между компонентами (для многоуровневых проектов)

### SOLUTIONS_HISTORY.md должен содержать:
- Дату и описание каждой проблемы
- В каком подпроекте возникла проблема (для многоуровневых проектов)
- Влияние на другие подпроекты (для многоуровневых проектов)
- Найденные причины
- Примененные решения
- Статус решения

### CHAT_HISTORY.md должен содержать:
- Полную историю переписки с AI
- Все вопросы и ответы
- Выполненные действия в каждом подпроекте (для многоуровневых проектов)
- Контекст каждой проблемы

#### Формат ведения истории чата (ОБЯЗАТЕЛЬНО):
- Каждая реплика записывается отдельной строкой/блоком в формате:
  - "Пользователь: <сообщение>"
  - "ИИ Агент: <ответ>"
- Сообщения идут строго в хронологическом порядке
- Ответ агента может содержать подпункты (план, действия, контекст), но остаётся одним сообщением после тега "ИИ Агент:"
- Нельзя смешивать или объединять разные роли в один блок
- Новые записи всегда добавляются в конец файла без изменения предыдущих

#### Включение кода в переписку (ОБЯЗАТЕЛЬНО):
- Для существующего кода из репозитория использовать формат код-референсов:
  startLine:endLine:filepath
  // кодовая выписка
  
  - Всегда указывать начальную и конечную строки, а также полный путь к файлу
  - Не добавлять язык в шапку блоков код-референса
  - Не включать номера строк внутри содержимого
  - Допускается сокращение длинных секций комментарием `// ... more code ...`

- Для нового/предлагаемого кода использовать стандартные fenced-блоки с языком:
  python
  # пример нового кода
  ```
  - Не указывать номера строк в содержимом
  - Не оборачивать целое сообщение в один код-блок — только релевантные фрагменты

- Общие правила для кода в сообщениях:
  - Сохранять исходные отступы и стиль форматирования
  - Комментарии писать только по существу (не описывать действия ассистента)
  - Длинные команды/логи форматировать как bash/text блоки

### SYNC_INSTRUCTIONS.md должен содержать:
- Инструкции по синхронизации между компьютерами
- Способы настройки Git
- Рабочий процесс
- Рекомендации по использованию

### CHANGELOG.md должен содержать:
- Формат по Keep a Changelog и SemVer
- Разделы: [Unreleased], версии с датами, подпункты Added/Changed/Fixed/Removed
- Ссылки сравнения версий (при наличии репозитория)
- Источник записей — коммиты (рекомендуется Conventional Commits)

## Рабочий процесс
- При первом обращении к проекту создавать все файлы контекста
- При каждом решении проблемы обновлять соответствующие файлы
- При завершении сессии работы сохранять изменения в Git
- При работе на новом компьютере читать файлы контекста для восстановления понимания проекта
- Обеспечивать непрерывность контекста при переходе между уровнями проекта
- Автоматически синхронизировать контекст между всеми подпроектами

## Ключевые особенности

### Универсальность:
- Работает для любых проектов (простых и многоуровневых)
- Автоматически определяет структуру проекта
- Адаптируется к сложности проекта

### Непрерывность контекста:
- Файлы контекста служат мостом между чатами
- Автоматическая передача контекста между уровнями
- Избежание дублирования решений

### Синхронизация:
- Работа на любом компьютере
- Полное понимание проекта
- Автоматическое создание файлов контекста
